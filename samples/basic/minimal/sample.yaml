sample:
  description: minimal sample, the smallest possible Zephyr application
  name: minimal
common:
  tags: footprint
  depends_on:
    - minimal
  harness: console
  harness_config:
    type: one_line
    regex:
      - "Hello World from minimal!"
tests:
  sample.minimal.mt:
    arch_allow:
      - arm
      - x86
    extra_args:
      - CONF_FILE='common.conf;mt.conf;arm.conf'
      - arch:arm:EXTRA_CONF_FILE=arm.conf
      - arch:x86:EXTRA_CONF_FILE=x86.conf
    build_only: true
    integration_platforms:
      - frdm_k64f
      - mps2/an385
      - nrf51dk/nrf51822
      - nucleo_f429zi
      - disco_l475_iot1
      - qemu_x86
  sample.minimal.mt-no-preempt:
    arch_allow:
      - arm
      - x86
    extra_args:
      - CONF_FILE='common.conf;mt.conf;no-preempt.conf'
      - arch:arm:EXTRA_CONF_FILE=arm.conf
      - arch:x86:EXTRA_CONF_FILE=x86.conf
    build_only: true
    integration_platforms:
      - frdm_k64f
      - mps2/an385
      - nrf51dk/nrf51822
      - nucleo_f429zi
      - disco_l475_iot1
      - qemu_x86
  sample.minimal.mt-no-preempt-no-timers:
    arch_allow:
      - arm
      - x86
    extra_args:
      - CONF_FILE='common.conf;mt.conf;no-preempt.conf;no-timers.conf'
      - arch:arm:EXTRA_CONF_FILE=arm.conf
      - arch:x86:EXTRA_CONF_FILE=x86.conf
    build_only: true
    integration_platforms:
      - frdm_k64f
      - mps2/an385
      - nrf51dk/nrf51822
      - nucleo_f429zi
      - disco_l475_iot1
      - qemu_x86
  sample.minimal.no-mt:
    arch_allow:
      - arm
      - x86
    extra_args:
      - CONF_FILE='common.conf;no-mt.conf'
      - arch:arm:EXTRA_CONF_FILE=arm.conf
      - arch:x86:EXTRA_CONF_FILE=x86.conf
    build_only: true
    integration_platforms:
      - frdm_k64f
      - mps2/an385
      - nrf51dk/nrf51822
      - nucleo_f429zi
      - disco_l475_iot1
      - qemu_x86
  sample.minimal.no-mt-no-timers:
    arch_allow:
      - arm
      - x86
    extra_args:
      - CONF_FILE='common.conf;no-mt.conf;no-timers.conf'
      - arch:arm:EXTRA_CONF_FILE=arm.conf
      - arch:x86:EXTRA_CONF_FILE=x86.conf
    build_only: true
    integration_platforms:
      - frdm_k64f
      - mps2/an385
      - nrf51dk/nrf51822
      - nucleo_f429zi
      - disco_l475_iot1
      - qemu_x86
  sample.minimal.arc.runtime:
    extra_args:
      - CONF_FILE='common-runtime.conf;no-timers.conf'
    arch_allow: arc
    tags:
      - kernel
    integration_platforms:
      - qemu_arc/qemu_arc_em
  sample.minimal.riscv.runtime:
    extra_args:
      - CONF_FILE='common-runtime.conf;no-timers.conf;no-mt.conf;riscv.conf'
    arch_allow: riscv
    tags:
      - kernel
    integration_platforms:
      - qemu_riscv32
