# Copyright (c) 2024 Intel Corporation
# Copyright 2025 NXP
# SPDX-License-Identifier: Apache-2.0

menuconfig MCTP
	bool "Management Component Transport Protocol [EXPERIMENTAL]"
	select EXPERIMENTAL
	help
	  Enable the MCTP Subsystem and Module Usage

if MCTP

config MCTP_HEAP_SIZE
	int "MCTP Heap Size"
	default 1024
	help
	  MCTP requires a heap for allocating packet buffers. A dedicated
	  heap is provided to MCTP at startup avoiding the need to specify
	  libmctp's allocation operations. This setting defines the size of
	  the dedicated MCTP heap in bytes. Defaults to 1KB for small packets.

config MCTP_BTU
    int "MCTP Baseline Transmission Unit"
    default 64
    help
      Baseline transmission unit used by libmctp core for MTU checks and fragmentation.

config MCTP_UART
	bool "MCTP UART Binding"
	depends on UART_ASYNC_API
	help
	  Build the MCTP UART binding to use MCTP over Zephyr's async UART
	  interface.

config MCTP_I2C_GPIO_CONTROLLER
	bool "MCTP I2C+GPIO Controller Binding"
	depends on I2C
	depends on I2C_RTIO
	depends on GPIO
	help
	  Build the MCTP I2C+GPIO controller binding to use MCTP over Zephyr's I2C RTIO
	  interface and GPIO interrupts from targets to signal their request to write.

config MCTP_I2C_GPIO_TARGET
	bool "MCTP I2C+GPIO Target Binding"
	depends on I2C
	depends on GPIO
	help
	  Build the MCTP I2C+GPIO target binding to use MCTP over Zephyr's I2C target
	  interface and GPIO to signal writes to the bus controller.

config MCTP_I2C_SMBUS_TARGET
    bool "MCTP I2C+SMBUS Target Binding"
    depends on I2C
    depends on I2C_TARGET
    help
      Build the MCTP I2C+SMBUS target binding to use MCTP over Zephyr's I2C target
      interface and do role Switch to signal writes to the bus controller.

config MCTP_I2C_SMBUS_BLOCK_MAX
    int "MCTP SMBus block max payload (bytes)"
    default 32
    range 1 255
    depends on MCTP_I2C_SMBUS_TARGET
    help
      Maximum number of data bytes in SMBus Block Write for MCTP over SMBus.
      Classic SMBus is 32.

config MCTP_I3C_CONTROLLER
	bool "MCTP I3C Controller Binding"
	depends on I3C_CONTROLLER
	depends on I3C_USE_IBI
	help
	  Build the MCTP I3C controller binding to use MCTP over Zephyr's I3C
	  interface and IBI to signal from targets to a request to send messages.

config MCTP_I3C_TARGET
	bool "MCTP I3C Target Binding"
	depends on I3C_TARGET
	depends on I3C_USE_IBI
	depends on I3C_TARGET_BUFFER_MODE
	help
	  Build the MCTP I3C target binding to use MCTP over Zephyr's I3C target
	  interface and IBI to signal a request to send messages to the bus controller.

config MCTP_USB
	bool "MCTP USB Binding"
	depends on USB_DEVICE_STACK_NEXT
	help
	  Build the MCTP USB binding to use MCTP over Zephyr's USB device interface.

module = MCTP
module-str = MCTP
source "subsys/logging/Kconfig.template.log_config"

rsource "Kconfig.usb"

endif
